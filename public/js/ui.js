$(document).ready(function(){function e(){var e=$("input[name='c-num']").val(),n=$("input[name='c-part']").val(),a=$("input[name='c-partlen']").val();$.getJSON("/sample",{number:e,parts:n,length:a},function(e){$("#coupon-sample").html(e)})}e(),$.validator.addMethod("loginRegex",function(e,n){return this.optional(n)||/^[a-zA-Zа-яА-Я0-9\-]+$/i.test(e)},"Только цифры, буквы и дефис"),$("#coupons-generate").validate({errorClass:"uk-form-danger",validClass:"uk-form-success",highlight:function(e,n,a){$(e).addClass(n).removeClass(a)},unhighlight:function(e,n,a){$(e).removeClass(n).addClass(a)},rules:{"c-num":{required:!0,range:[1,1e4]},"c-part":{required:!0,range:[1,5]},"c-partlen":{required:!0,range:[4,10]},discount:{required:!0},until:{required:!0,dateNL:!0},group:{loginRegex:!0}},submitHandler:function(e){return $(e).ajaxSubmit({success:function(e){"success"==e?$.UIkit.notify("<i class='uk-icon-check'></i> Отправлено в очередь на выполнение.<br />Состояние можно посмотреть на странице <a href='/zadaniya'>&laquo;Задания&raquo;</a>.",{status:"success"}):$.UIkit.notify("ошибка",{status:"danger"})}}),!1}}),$("input[name='c-part'], input[name='c-partlen']").change(e),$("select[name='typediscount']").change(function(){1==$("select[name='typediscount']").val()?($(".uk-icon-percent").remove(),$(".uk-icon-rub").remove(),$("#b-discount").prepend("<i class='uk-icon-percent'></i>")):($(".uk-icon-percent").remove(),$(".uk-icon-rub").remove(),$("#b-discount").prepend("<i class='uk-icon-rub'></i>"))})});